(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{gUij:function(e,n,t){"use strict";t.r(n),t.d(n,"_frontmatter",(function(){return i})),t.d(n,"default",(function(){return b}));var a=t("wx14"),o=t("zLVn"),s=(t("q1tI"),t("7ljp")),r=t("013z"),i=(t("qKvR"),{}),l={_frontmatter:i},c=r.a;function b(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(s.b)(c,Object(a.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(s.b)("h1",null,"Automation Base Pak - UI Framework"),Object(s.b)("p",null,"This framework will act as a starting point for Base Pak UI components."),Object(s.b)("p",null,"It includes:"),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol"},"A react application using Carbon 10"),Object(s.b)("li",{parentName:"ol"},"Code linting and formatting"),Object(s.b)("li",{parentName:"ol"},"Localization support"),Object(s.b)("li",{parentName:"ol"},"UI testing frameworks for component testing"),Object(s.b)("li",{parentName:"ol"},"An API Server and proxy"),Object(s.b)("li",{parentName:"ol"},"Storybooks for rendering and prototyping"),Object(s.b)("li",{parentName:"ol"},"Universal Base Images: UBI8")),Object(s.b)("p",null,"Also included is a deployment manifest for creating instances of Kibana and ElasticSearch within your local Docker environment."),Object(s.b)("h2",null,"Getting started"),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol"},"Clone this repo"),Object(s.b)("li",{parentName:"ol"},"Build Container Images from directory root:")),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"$ ./build.sh\n...\nSuccessfully built 321d29eadecb\nSuccessfully tagged default-route-openshift-image-registry.apps.mcuiocp.os.fyre.ibm.com/basepakui/dashboard:latest\n")),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol"},"Install the stack and dashboardUI into your local docker environment using:")),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"$ docker-compose up -d\nCreating kib01  ... done\nCreating abp-ui ... done\nCreating es01   ... done\n")),Object(s.b)("ol",{start:4},Object(s.b)("li",{parentName:"ol"},"Populate ElasticSearch with sample data:")),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),'$ curl -X POST \'http://localhost:5601/api/sample_data/flights\' -H \'kbn-version: 7.8.0\'\n{"elasticsearchIndicesCreated":{"kibana_sample_data_flights":13059},"kibanaSavedObjectsLoaded":23}\n')),Object(s.b)("h2",null,"Accessing the Base Pak UI from a browser"),Object(s.b)("p",null,"Once all the containers have started, open the application from a browser by visiting: ",Object(s.b)("inlineCode",{parentName:"p"},"http://127.0.0.1:3080")),Object(s.b)("p",null,"The UI on startup will connect to its API server and retrieve a list of Dashboards from the Kibaba service:"),Object(s.b)("img",{src:"./docs/images/launch.png",alt:"alt text",title:"Launch Page"}),Object(s.b)("p",null,"This confirms all containers have stated and are functioning correctly."),Object(s.b)("p",null,"Next: Select the dashboard you want to display:"),Object(s.b)("img",{src:"./docs/images/select.png",alt:"alt text",title:"Select Dashboard"}),Object(s.b)("p",null,"Result of loading a dashboard:"),Object(s.b)("img",{src:"./docs/images/dashboard.png",alt:"alt text",title:"Open Dashboard"}),Object(s.b)("h2",null,"Development"),Object(s.b)("h3",null,"Localization support"),Object(s.b)("p",null,"This UI project uses a simple set of JSON files for each supported language:"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"├── basepakui\n   ├── locales\n   │   └── de\n   │   │   └── translation.json\n   │   ├── en\n   │   │   └── translation.json\n   │   └── es\n   │   │   └── translation.json\n   │   └── fr\n   │       └── translation.json\n")),Object(s.b)("p",null,"Each locale has its own translation strings file."),Object(s.b)("p",null,"The format of the file is ",Object(s.b)("inlineCode",{parentName:"p"},"{componentName}.{stringName}")," eg:"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "baseHeader": {\n    "appName": "Automation Base Pak UI"\n  },\n  "page-landing": {\n    "breadcrumb": "Welcome",\n    "welcome": "Welcome"\n  },\n\n  "page-kibana": {\n    "breadcrumb": "Kibana Dash",\n    "title": "Integrated Kibana Dashboard"\n  },\n  "kibana-dash-picker": {\n    "err-dashboards": "Error loading Kibana dashboards"\n  }\n}\n')),Object(s.b)("p",null,"Example of using strings within a component would require:"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"import { useTranslation } from 'react-i18next';\nconst { t } = useTranslation('translations');\nconst text = t('page-kibana.breadcrumb');\n")),Object(s.b)("h3",null,"Tests and testing frameworks"),Object(s.b)("p",null,"Test frameworks have been added to the UI codebase and can be run using:"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"$ cd basepakui\n$ npm install\n$ npm run test\n\nPASS  src/components/BaseHeader/__tests__/BaseHeader.test.js (8.545 s)\n  <BaseHeader />\n    ✓ renders without crashing (45 ms)\n    ✓ has a Kibana link (10 ms)\n\nPASS  src/components/KibanaDashPicker/__tests__/KibanaDashPicker.test.js (9.367 s)\n  <KibanaDashPicker />\n    ✓ renders without crashing (62 ms)\n\nTest Suites: 2 passed, 2 total\nTests:       3 passed, 3 total\nSnapshots:   0 total\nTime:        11.261 s\n")),Object(s.b)("p",null,"During development of the test it is convenient to ",Object(s.b)("inlineCode",{parentName:"p"},"watch")," for changes to a file and re-run the modified suite automatically. To enable test watching, run the command:"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{}),"$ npm run test-watch\n")),Object(s.b)("h4",null,"Viewing test coverage:"),Object(s.b)("p",null,"Test coverage can be generated using the command ",Object(s.b)("inlineCode",{parentName:"p"},"npm run test"),"."),Object(s.b)("p",null,"Note: We do not commit test-coverage reports as they will be run by the test and build bots on each PR. the coverage directory is ",Object(s.b)("inlineCode",{parentName:"p"},".gitignored"),"."),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"$ npm run test-coverage\n\n PASS  src/components/BaseHeader/__tests__/BaseHeader.test.js (6.378 s)\n PASS  src/components/KibanaDashPicker/__tests__/KibanaDashPicker.test.js (7.097 s)\n---------------------------------|---------|----------|---------|---------|-------------------\nFile                             | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s\n---------------------------------|---------|----------|---------|---------|-------------------\nAll files                        |   93.33 |     62.5 |   85.71 |   93.33 |\n src                             |     100 |      100 |     100 |     100 |\n  i18n.js                        |     100 |      100 |     100 |     100 |\n src/components/BaseHeader       |     100 |      100 |     100 |     100 |\n  BaseHeader.js                  |     100 |      100 |     100 |     100 |\n src/components/KibanaDashPicker |   90.91 |     62.5 |   83.33 |   90.91 |\n  KibanaDashPicker.js            |   90.91 |     62.5 |   83.33 |   90.91 | 36,66\n src/modules                     |     100 |      100 |     100 |     100 |\n  APILocations.js                |     100 |      100 |     100 |     100 |\n---------------------------------|---------|----------|---------|---------|-------------------\n\nTest Suites: 2 passed, 2 total\nTests:       3 passed, 3 total\nSnapshots:   0 total\nTime:        8.243 s, estimated 10 s\nRan all test suites.\n")),Object(s.b)("p",null,"Coverage can be viewed in more detail by opening the basepakui/coverage/lcov-report/index.html file report in a browser"),Object(s.b)("img",{src:"./docs/images/coverage.png",alt:"alt text",title:"Coverage"}),Object(s.b)("p",null,"From here you can drill down into the source files and view the lines which have not test been tested."),Object(s.b)("img",{src:"./docs/images/coverage2.png",alt:"alt text",title:"Coverage Detail"}),Object(s.b)("h3",null,"Storybooks & component rendering"),Object(s.b)("p",null,"Storybooks provide a way of rendering an individual UI component in isolation from the page and does not require the full runtime / security stack. It is ideal for use when prototyping, documenting and demoing a components functionality."),Object(s.b)("p",null,"All components in addition to a test should also have a storybook entry."),Object(s.b)("p",null,"To view the storybooks, launch the embedded storybook server:"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),'$ npm run storybook\n\ninfo @storybook/react v5.3.19\ninfo\ninfo => Loading presets\ninfo => Loading presets\ninfo => Loading config/preview file in "./.storybook".\ninfo => Adding stories defined in ".storybook/main.js".\ninfo => Using default Webpack setup.\n...........\n╭────────────────────────────────────────────────────╮\n│                                                    │\n│   Storybook 5.3.19 started                         │\n│   1.63 min for manager and 1.73 min for preview    │\n│                                                    │\n│    Local:            http://localhost:6006/        │\n│    On your network:  http://192.168.1.105:6006/    │\n│                                                    │\n╰────────────────────────────────────────────────────╯\n')),Object(s.b)("p",null,"The storybook UI will open in your default browser:"),Object(s.b)("img",{src:"./docs/images/storybook1.png",alt:"alt text",title:"Storybook Landing page"}),Object(s.b)("p",null,"Each component is listed in the navigator along with different rendering and animation states making it easy to check more than just default golden-path rendering:"),Object(s.b)("img",{src:"./docs/images/storybook2.png",alt:"alt text",title:"Storybook With an error"}),Object(s.b)("p",null,"To an error state to check the error message output format:"),Object(s.b)("img",{src:"./docs/images/storybook-error.png",alt:"alt text",title:"Storybook With an error"}),Object(s.b)("h3",null,"Pre-Commit checks"),Object(s.b)("p",null,"Before committing code, it is important to run the pre-commit tools against your code changes:"),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol"},Object(s.b)("p",{parentName:"li"},Object(s.b)("inlineCode",{parentName:"p"},"npm run pretty-quick")," : Format source files to ensure they follows the style guidelines.")),Object(s.b)("li",{parentName:"ol"},Object(s.b)("p",{parentName:"li"},Object(s.b)("inlineCode",{parentName:"p"},"npm run lint")," : Runs linter error checking")),Object(s.b)("li",{parentName:"ol"},Object(s.b)("p",{parentName:"li"},Object(s.b)("inlineCode",{parentName:"p"},"npm run lint-fix")," to attempt to fix any errors found in previous command."))),Object(s.b)("p",null,"eg:"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"$ npm run pretty-quick\n\n🔍  Finding changed files since git revision 11787f4.\n🎯  Found 2 changed files.\n✍️  Fixing up README.md.\n✅  Everything is awesome!\n\n$ npm run lint\n$\n")),Object(s.b)("p",null,"Running the linter and finding an error (in this case there is a space between App Constants, it should be one word) is reported as:"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"  18:17  error  Parsing error: Unexpected token\n\n  16 | import i18n from './i18n';\n  17 |\n> 18 | import * as App Constants from './modules/AppConstants';\n     |                 ^\n  19 | import './index.scss';\n  20 | import App from './App';\n  21 | import * as serviceWorker from './serviceWorker';\n")))}b.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-abp-ui-frameworks-mdx-546d9d506dfc22782241.js.map